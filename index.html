<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hoy es Ekadasi - Recordatorios de Ayuno</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --color-primary: #1a5f5a;
      --color-secondary: #2d7a74;
      --color-accent: #c9a962;
      --color-cream: #faf6f0;
      --color-warm: #f9ae9f;
      --color-text: #3a3a3a;
      --color-text-light: #666;
      --font-serif: 'Cormorant Garamond', Georgia, serif;
      --font-sans: 'Lato', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: var(--font-sans);
      background: var(--color-cream);
      color: var(--color-text);
      min-height: 100vh;
      line-height: 1.6;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Header */
    .header {
      text-align: center;
      margin-bottom: 50px;
    }

    .logo {
      width: 140px;
      height: 140px;
      margin: 0 auto 20px;
      border-radius: 50%;
      box-shadow: 0 4px 20px rgba(26, 95, 90, 0.15);
    }

    .logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
    }

    h1 {
      font-family: var(--font-serif);
      font-size: 2.5rem;
      font-weight: 600;
      color: var(--color-primary);
      margin-bottom: 8px;
    }

    .subtitle {
      font-size: 1.1rem;
      color: var(--color-text-light);
      font-weight: 300;
    }

    /* Main Grid */
    .main-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      margin-bottom: 50px;
    }

    @media (max-width: 768px) {
      .main-grid {
        grid-template-columns: 1fr;
        gap: 30px;
      }

      h1 { font-size: 2rem; }

      .logo {
        width: 120px;
        height: 120px;
      }
    }

    /* Cards */
    .card {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
      border: 1px solid rgba(26, 95, 90, 0.08);
    }

    .card h2 {
      font-family: var(--font-serif);
      font-size: 1.5rem;
      color: var(--color-primary);
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--color-warm);
    }

    .card p {
      color: var(--color-text-light);
      margin-bottom: 15px;
      font-size: 0.95rem;
    }

    /* WhatsApp section */
    .whatsapp-number {
      background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
      color: white;
      padding: 15px 20px;
      border-radius: 8px;
      text-align: center;
      margin: 20px 0;
    }

    .whatsapp-number .number {
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    .whatsapp-number .hint {
      font-size: 0.85rem;
      opacity: 0.9;
      margin-top: 5px;
    }

    .btn {
      display: block;
      padding: 14px 24px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      text-decoration: none;
      text-align: center;
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
      border: none;
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    .btn-whatsapp {
      background: #25D366;
      color: white;
    }

    .btn-whatsapp:hover {
      box-shadow: 0 4px 15px rgba(37, 211, 102, 0.35);
    }

    .btn-primary {
      background: var(--color-primary);
      color: white;
      width: 100%;
    }

    .btn-primary:hover {
      box-shadow: 0 4px 15px rgba(26, 95, 90, 0.3);
    }

    .commands {
      margin-top: 20px;
      font-size: 0.9rem;
    }

    .commands dt {
      font-weight: 700;
      color: var(--color-secondary);
      display: inline;
    }

    .commands dd {
      display: inline;
      color: var(--color-text-light);
      margin-left: 5px;
    }

    .commands div {
      margin: 8px 0;
    }

    /* Calendar section */
    .calendar-form label {
      display: block;
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 8px;
      color: var(--color-text);
    }

    .calendar-form select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      background: white;
      color: var(--color-text);
      margin-bottom: 15px;
    }

    .calendar-form select:focus {
      outline: none;
      border-color: var(--color-secondary);
    }

    .searchable-select {
      position: relative;
      margin-bottom: 15px;
    }

    .searchable-select input {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px 8px 0 0;
      font-size: 1rem;
      background: white;
      color: var(--color-text);
    }

    .searchable-select input:focus {
      outline: none;
      border-color: var(--color-secondary);
    }

    .searchable-select select {
      width: 100%;
      border: 1px solid #ddd;
      border-top: none;
      border-radius: 0 0 8px 8px;
      font-size: 0.9rem;
      background: white;
      margin-bottom: 0;
    }

    .searchable-select select option {
      padding: 8px 12px;
    }

    .searchable-select select option:checked {
      background: var(--color-primary);
      color: white;
    }

    .searchable-select select optgroup {
      font-weight: 600;
      color: var(--color-primary);
      padding: 8px 0 4px;
    }

    .calendar-instructions {
      background: var(--color-cream);
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      font-size: 0.85rem;
    }

    .calendar-instructions h4 {
      font-size: 0.9rem;
      color: var(--color-primary);
      margin-bottom: 10px;
    }

    .calendar-instructions ol {
      margin-left: 18px;
      color: var(--color-text-light);
    }

    .calendar-instructions li {
      margin: 6px 0;
    }

    .calendar-url {
      margin-top: 12px;
      padding: 10px;
      background: white;
      border-radius: 6px;
      font-size: 0.8rem;
      word-break: break-all;
      color: var(--color-text-light);
      border: 1px solid #eee;
    }

    /* Reverencias */
    .reverencias {
      text-align: center;
      padding: 30px 20px;
      max-width: 700px;
      margin: 0 auto;
    }

    .reverencias p {
      font-family: var(--font-serif);
      font-size: 1rem;
      color: var(--color-text-light);
      font-style: italic;
      line-height: 1.8;
    }

    /* Links */
    .source-links {
      text-align: center;
      padding: 20px;
      margin-bottom: 20px;
    }

    .source-links a {
      display: inline-block;
      color: var(--color-primary);
      text-decoration: none;
      font-size: 0.9rem;
      margin: 0 15px;
      padding: 5px 0;
      border-bottom: 1px solid transparent;
      transition: border-color 0.2s;
    }

    .source-links a:hover {
      border-bottom-color: var(--color-warm);
    }

    /* Fasting Rules */
    .fasting-rules {
      background: white;
      border-radius: 12px;
      padding: 40px;
      margin-bottom: 50px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
      border: 1px solid rgba(26, 95, 90, 0.08);
    }

    .fasting-rules h2 {
      font-family: var(--font-serif);
      font-size: 1.8rem;
      color: var(--color-primary);
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--color-warm);
      text-align: center;
    }

    .fasting-rules h3 {
      font-family: var(--font-serif);
      font-size: 1.3rem;
      color: var(--color-primary);
      margin: 30px 0 15px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--color-warm);
    }

    .fasting-rules h4 {
      font-size: 0.95rem;
      font-weight: 700;
      color: var(--color-secondary);
      margin: 20px 0 10px;
    }

    .fasting-rules p {
      color: var(--color-text-light);
      margin-bottom: 15px;
      font-size: 0.95rem;
      line-height: 1.7;
    }

    .fasting-rules .intro {
      font-style: italic;
      background: var(--color-cream);
      padding: 15px 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .fasting-rules ul {
      margin: 10px 0 15px 20px;
      color: var(--color-text-light);
      font-size: 0.9rem;
    }

    .fasting-rules ul li {
      margin: 8px 0;
      line-height: 1.6;
    }

    .fasting-rules strong {
      color: var(--color-text);
    }

    .fasting-rules .warning {
      color: #8b4513;
      font-weight: 600;
    }

    @media (max-width: 768px) {
      .fasting-rules { padding: 25px 20px; }
      .fasting-rules h2 { font-size: 1.5rem; }
    }

    /* GitHub icon */
    .github-link {
      position: fixed;
      bottom: 15px;
      left: 15px;
      opacity: 0.4;
      transition: opacity 0.2s;
    }

    .github-link:hover {
      opacity: 0.8;
    }

    .github-link svg {
      width: 20px;
      height: 20px;
      fill: var(--color-text);
    }

    @media (max-width: 768px) {
      .container { padding: 25px 15px; }
      .card { padding: 20px; }
      .source-links a { display: block; margin: 8px 0; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="logo">
        <img src="assets/logo.png" alt="Hoy es Ekadasi">
      </div>
      <h1>Hoy es Ekadasi</h1>
      <p class="subtitle">Recordatorios de ayuno para practicantes Vaisnavas</p>
    </header>

    <div class="main-grid">
      <div class="card">
        <h2>Bot de WhatsApp</h2>
        <p>Recibe notificaciones automáticas un día antes de cada Ekadasi y el horario exacto para romper el ayuno (paran).</p>

        <div class="whatsapp-number">
          <div class="number">+1 (980) 372-5205</div>
          <div class="hint">Guarda este número y envía un mensaje</div>
        </div>

        <a href="https://wa.me/19803725205?text=Hola" class="btn btn-whatsapp" target="_blank">
          Abrir WhatsApp
        </a>

        <dl class="commands">
          <div><dt>PROXIMO</dt><dd>— Ver el próximo Ekadasi</dd></div>
          <div><dt>STOP</dt><dd>— Cancelar suscripción</dd></div>
        </dl>
      </div>

      <div class="card">
        <h2>Calendario (.ics)</h2>
        <p>Suscríbete al calendario de Ekadasis en tu aplicación favorita. Se sincroniza automáticamente.</p>

        <div class="calendar-form">
          <label for="city-search">Tu ciudad:</label>
          <div class="searchable-select">
            <input type="text" id="city-search" placeholder="Buscar ciudad..." autocomplete="off">
            <select id="city" size="6">
              <optgroup label="México - Principales">
                <option value="America/Mexico_City" data-search="ciudad mexico cdmx df">Ciudad de México (CDMX)</option>
                <option value="America/Mexico_City" data-search="guadalajara jalisco">Guadalajara</option>
                <option value="America/Monterrey" data-search="monterrey nuevo leon">Monterrey</option>
                <option value="America/Mexico_City" data-search="puebla">Puebla</option>
                <option value="America/Tijuana" data-search="tijuana baja california">Tijuana</option>
                <option value="America/Mexico_City" data-search="leon guanajuato">León</option>
                <option value="America/Mexico_City" data-search="zacatecas">Zacatecas</option>
                <option value="America/Mexico_City" data-search="ciudad victoria tamaulipas">Ciudad Victoria</option>
              </optgroup>
              <optgroup label="México - Otras">
                <option value="America/Mexico_City" data-search="queretaro">Querétaro</option>
                <option value="America/Mexico_City" data-search="merida yucatan">Mérida</option>
                <option value="America/Cancun" data-search="cancun quintana roo">Cancún</option>
                <option value="America/Mexico_City" data-search="aguascalientes">Aguascalientes</option>
                <option value="America/Mexico_City" data-search="morelia michoacan">Morelia</option>
                <option value="America/Mexico_City" data-search="oaxaca">Oaxaca</option>
                <option value="America/Mexico_City" data-search="veracruz">Veracruz</option>
                <option value="America/Mexico_City" data-search="toluca estado mexico">Toluca</option>
                <option value="America/Hermosillo" data-search="hermosillo sonora">Hermosillo</option>
                <option value="America/Chihuahua" data-search="chihuahua">Chihuahua</option>
                <option value="America/Mazatlan" data-search="mazatlan sinaloa culiacan">Mazatlán / Culiacán</option>
              </optgroup>
              <optgroup label="Sudamérica">
                <option value="America/Lima" data-search="lima peru">Lima, Perú</option>
                <option value="America/Bogota" data-search="bogota colombia">Bogotá, Colombia</option>
                <option value="America/Santiago" data-search="santiago chile">Santiago, Chile</option>
                <option value="America/Argentina/Buenos_Aires" data-search="buenos aires argentina">Buenos Aires, Argentina</option>
                <option value="America/Sao_Paulo" data-search="sao paulo brasil brazil">São Paulo, Brasil</option>
                <option value="America/Caracas" data-search="caracas venezuela">Caracas, Venezuela</option>
                <option value="America/Guayaquil" data-search="quito guayaquil ecuador">Ecuador</option>
              </optgroup>
              <optgroup label="Centroamérica y Caribe">
                <option value="America/Guatemala" data-search="guatemala">Guatemala</option>
                <option value="America/Costa_Rica" data-search="costa rica san jose">Costa Rica</option>
                <option value="America/Panama" data-search="panama">Panamá</option>
                <option value="America/Havana" data-search="habana cuba">La Habana, Cuba</option>
                <option value="America/Santo_Domingo" data-search="santo domingo republica dominicana">Rep. Dominicana</option>
              </optgroup>
              <optgroup label="Estados Unidos">
                <option value="America/Los_Angeles" data-search="los angeles california">Los Ángeles</option>
                <option value="America/Chicago" data-search="chicago houston dallas texas">Houston / Dallas / Chicago</option>
                <option value="America/New_York" data-search="new york miami florida">Nueva York / Miami</option>
              </optgroup>
              <optgroup label="Europa">
                <option value="Europe/Madrid" data-search="madrid españa spain barcelona">España</option>
                <option value="Europe/London" data-search="london londres uk reino unido">Reino Unido</option>
              </optgroup>
              <optgroup label="India">
                <option value="Asia/Kolkata" data-search="india vrindavan mathura delhi kolkata">India (Vṛndāvan)</option>
              </optgroup>
            </select>
          </div>
          <button class="btn btn-primary" onclick="downloadCalendar()">
            Descargar Calendario
          </button>
        </div>

        <div class="calendar-instructions">
          <h4>Cómo suscribirse</h4>
          <ol>
            <li><strong>Google Calendar:</strong> Añadir calendario → Desde URL</li>
            <li><strong>iPhone:</strong> Ajustes → Calendario → Añadir suscripción</li>
            <li><strong>Outlook:</strong> Suscribirse desde la web</li>
          </ol>
          <div class="calendar-url">
            https://ekadasi-api.bhaktilatam.com/calendar.ics?tz=America/Mexico_City
          </div>
        </div>
      </div>
    </div>

    <section class="fasting-rules">
      <h2>Reglas de Ayuno</h2>

      <div class="intro">
        <p>Si has observado un ayuno completo (sin siquiera agua), no necesitas romperlo con granos. Puedes romperlo con caraṇāmṛta o fruta. Pero si has observado Ekādaśī comiendo fruta, vegetales, etc., entonces debes romperlo al día siguiente tomando granos en los horarios indicados.</p>
        <p><strong>Mahā-dvādaśī se observa igual que Ekādaśī.</strong></p>
      </div>

      <h3>Ekādaśī</h3>
      <p>La esencia es comer de manera simple, una o dos veces, para poder dedicar el mayor tiempo posible a escuchar, cantar y recordar a Śrī Śrī Rādhā-Kṛṣṇa. <span class="warning">Nunca comas carne, pescado, huevos, cebolla, ajo, zanahoria, lentejas rojas (masūr-dal), lentejas verdes planas, hongos ni productos derivados de estos.</span></p>

      <h4>Alimentos restringidos en Ekādaśī:</h4>
      <ul>
        <li>Tomates, berenjenas, coliflor, brócoli, pimientos, betabel, melón amargo (karela), loki, parmal, toroi, kunli, drumsticks, okra (bindī) y flores de plátano, rábano, calabaza, aceitunas</li>
        <li>Chícharos, garbanzos y todo tipo de leguminosas, incluyendo productos hechos de leguminosas (ej. papadams, tofu, tempeh)</li>
        <li>Todos los vegetales de hoja (ej. espinaca, lechugas, coles) y hierbas de hoja como perejil, hojas de cilantro, apio y hojas de curry</li>
        <li>Granos (ej. mijo, cebada, sémola, pasta, arroz, maíz) y todo tipo de harinas hechas de granos y leguminosas (ej. harina de arroz, harina de garbanzo, harina de urad dahl)</li>
        <li>Almidones de maíz o granos, y productos hechos o mezclados con estos almidones como bicarbonato, polvo para hornear, ciertas bebidas gaseosas con jarabe de maíz, natillas, ciertos yogures y pudines, ciertas variedades de crema y requesón, ciertos dulces y caramelos, y bolitas de tapioca</li>
        <li>Aceites hechos de granos (ej. aceite de maíz, aceite de mostaza, aceite de sésamo) y productos fritos en estos aceites (ej. nueces fritas, papas fritas y otros snacks fritos)</li>
        <li>Miel y dulces hechos con almidones</li>
      </ul>

      <h4>Especias permitidas en Ekādaśī:</h4>
      <ul>
        <li>Solo pimienta negra en grano (moler personalmente) y sal pura de un paquete nuevo y limpio</li>
      </ul>

      <h4>Especias NO permitidas en Ekādaśī:</h4>
      <ul>
        <li>Hing (asafétida), semillas de sésamo, comino, fenogreco, mostaza, tamarindo, hinojo, cardamomo, nuez moscada, jengibre y cúrcuma (fresca o no)</li>
      </ul>

      <h4>Alimentos permitidos todos los días del año, incluyendo Ekādaśī y Cāturmāsya:</h4>
      <ul>
        <li>Todas las frutas frescas, todas las nueces y todos los aceites hechos de nueces si son puros</li>
        <li>Papas, calabaza, pepino, limón, aguacate, coco, trigo sarraceno, todos los azúcares</li>
        <li>Todos los productos lácteos puros (excepto yogur durante el 2do mes de Cāturmāsya y leche durante el 3er mes)</li>
        <li>Para sannyāsīs, brahmacārīs y vānaprasthas: rasurar la cabeza y cortar las uñas debe hacerse en días de luna llena</li>
      </ul>

      <h3>Cāturmāsya</h3>

      <h4>Alimentos restringidos durante los cuatro meses de Cāturmāsya:</h4>
      <ul>
        <li>Berenjenas, tomates, loki, parmal, urad dahl y miel</li>
      </ul>

      <h4>Alimentos particulares restringidos durante cada uno de los cuatro meses:</h4>
      <ul>
        <li><strong>Primer mes:</strong> Sin vegetales de hoja, como espinaca, todo tipo de lechugas, todo tipo de coles, kale, hierbas de hoja como cilantro, menta, perejil, curry y hierbas en polvo y tés</li>
        <li><strong>Segundo mes:</strong> Sin yogur (si se requiere por salud, puede mezclarse con agua)</li>
        <li><strong>Tercer mes:</strong> Sin leche (si se requiere, puede mezclarse con una gota de jugo de limón)</li>
        <li><strong>Cuarto mes:</strong> Sin aceite de mostaza ni semillas de sésamo</li>
      </ul>

      <h3>Puruṣottama Māsa</h3>

      <h4>Alimentos restringidos durante el mes de Puruṣottama:</h4>
      <ul>
        <li>Berenjenas, tomates, loki, parmal, urad dahl, miel, aceite de mostaza o semillas de sésamo</li>
        <li>Sin rasurar para brahmacārīs y sannyāsīs</li>
      </ul>
    </section>

    <div class="source-links">
      <a href="https://www.purebhakti.com/resources/vaisnava-calendar" target="_blank">Pure Bhakti</a>
      <a href="https://www.visuddhagauravani.com/" target="_blank">Śrī Kṛṣṇa Balarāma Mandir</a>
    </div>

    <div class="reverencias">
      <p>
        Ofrezco mis humildes reverencias a los pies de loto de<br>
        Śrī Śrīmad Bhaktivedānta Nārāyaṇa Gosvāmī Mahārāja,<br>
        a Śrīpad BV Madhusūdana Mahārāja<br>
        y a todos los vaiṣṇavas de la misión de Śrī Gauḍīya Vedānta Samiti.
      </p>
    </div>
  </div>

  <a href="https://github.com/vicrodh/ekadasi-calendar" class="github-link" target="_blank" title="Ver código fuente">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
    </svg>
  </a>

  <script>
    const API_BASE = 'https://ekadasi-api.bhaktilatam.com';

    function downloadCalendar() {
      const tz = document.getElementById('city').value;
      if (!tz) {
        alert('Por favor selecciona una ciudad');
        return;
      }
      const url = `${API_BASE}/calendar.ics?tz=${encodeURIComponent(tz)}`;
      window.open(url, '_blank');
    }

    // Buscador de ciudades
    document.addEventListener('DOMContentLoaded', function() {
      const searchInput = document.getElementById('city-search');
      const select = document.getElementById('city');
      const options = Array.from(select.querySelectorAll('option'));
      const optgroups = Array.from(select.querySelectorAll('optgroup'));

      searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '');

        if (!query) {
          // Mostrar todo
          optgroups.forEach(og => og.style.display = '');
          options.forEach(opt => opt.style.display = '');
          return;
        }

        options.forEach(option => {
          const text = option.textContent.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '');
          const searchData = (option.dataset.search || '').toLowerCase();
          const matches = text.includes(query) || searchData.includes(query);
          option.style.display = matches ? '' : 'none';
        });

        // Ocultar optgroups vacíos
        optgroups.forEach(og => {
          const visibleOptions = og.querySelectorAll('option:not([style*="display: none"])');
          og.style.display = visibleOptions.length ? '' : 'none';
        });
      });

      // Seleccionar primera opción por defecto
      if (options.length > 0) {
        options[0].selected = true;
      }
    });
  </script>
</body>
</html>
